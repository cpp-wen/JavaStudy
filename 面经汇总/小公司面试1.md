谈谈垃圾回收

垃圾回收主要主要分为两种算法

1. 可达性分析算法
2. 引用计数法

引用计数法为：当每个对象创建出来的后，如果被其他对象所引用，那么这个对象内部的引用计数器就会+1,如果没有对象引用，计数器的值就会变为0，这时候就会判断这个是可以被回收的。引用计数法有一个问题就是循环引用，导致两个对象都无法被回收。



可达性分析算法

可发性分析算法主要引用离散数学中图论的一些知识，将一个对象作为gc root节点，向下寻找所有引用节点。当寻找完毕，没有被引用的节点就会被认为是可以回收的。

那么可以作为gc root节点的对象分别有

1. 虚拟机栈中的对象
2. 堆中的对象
3. 常量池中的对象
4. 静态属性引用的对象



其次一个对象是否可以被回收还跟对象引用的类别有关。

从引用级别的强弱分别分为

强引用：永远不会被回收

软引用：当内存不足时候会被回收

弱引用：被gc扫描到的时候就会被回收

虚引用：幽灵引用，被回收的时候起到一个通知的作用



当一个对象被回收需要进行两次的标记

第一次标记是根据两个算法判断是否可以对象是否可以被回收

第二次标记是执行finalize()方法后如果有重新被引用则不会被回收