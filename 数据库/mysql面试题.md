# sql面试题

## sql语句优化

1. 对查询进行优化，应尽量避免全表扫描，首先应考虑在	where	及	order	by	涉及的列上建立索 引。(建立索引)
2. 应尽量避免在	where	子句中使用!=或<>操作符，否则将引擎放弃使用索引而进行全表扫描(避免使用范围操作符 走全表索引)
3. 尽量避免使用null 判断 在数据库中可以设置默认值进行查询 比如0
4. 对于多条件查询 避免使用or  可以使用union条件来将两个查询结果进行联合
5. 使用like  进行模糊查询的时候 如 like %nihao% 会采用全表扫描，这个时候可以使用创建分词使用全文检索
6. in 和not in 也会照成全表扫描  可以修改为 between
7. 对于sql 语句中拥有动态条件参数的时候，sql无法提前获得参数的值 无法进行索引选择使用 from t with(index(索引))来强制使用索引
8. 在sql中不要对变量的值 进行算数运算 会导致进行全表扫描
9. 避免在sql中使用函数操作
10. 复合索引尽量 让查询语句的字段顺序和复合索引字段顺序相同
11. 使用exists 来替代in 进行查询
12. 创建索引需要考虑索引字段的一个重复概率 如果重复的概率过大，sql会自动优化不走索引
13. 索引提高了select 的时间效率 但是insert和update的时间效率会有一定影响 需要考虑 创建索引的字段个数以及 索引的个数
14. 尽量避免创建聚簇索引，聚簇索引顺序和物理顺序一致，修改聚簇索引将改变整个表的记录顺序改变
15. 选择字段类型的时候优先选择使用数字类型，字符类型会降低查询和连接的性能，在引擎在处理查询和连接的时候会逐个比较字符串中的每一个字符而对于字符串类型只需要比较一次
<<<<<<< HEAD
16. 优先选取变长字段 varchar来替代char优势 存储空间小 以及小字段内进行搜索效率更高
17. 多表进行查询的时候用小表驱动大表 小表join大表



## 主从复制的原理

作用：

1. 读写分离，主库写 从库 读 实现数据库性能 支持更大的并发。
2. 做数据的热备份，当主服务器宕机之后可以切换从数据库继续工作。

复制原理：

目标:主库将sql 执行数据保存在binary-log中，从库获取主库的binary-log文件进行执行 并将结果存储在relay-log中

实现:主库拥有binarylog输出线程，从库拥有两个线程，从库的IO线程以及从库的sql线程，io线程获取主库中binarylog更新的值，并记录到relay-log中，sql线程从relay-log中读取更新的sql语句进行执行。
=======
16. 优先选取变长字段 varchar来替代char优势 存储空间小 以及小字段内进行搜索效率更高    




>>>>>>> 9845dbc47487ce1543fb7af47c9936d4a532ffc2









